<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; UMBRELLA Wiki 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contact" href="99_Contact.html" />
    <link rel="prev" title="Architecture" href="1_Architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/umbrella_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0_Introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="0_Introduction.html#testbeds">Testbeds</a><ul>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#smart-city-sensing-and-wireless-testbed">Smart City Sensing and Wireless Testbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#testbed-features-and-benefits">Testbed features and Benefits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#robotics-testbed">Robotics Testbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#id1">Testbed features and Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#use-case-key-features">Use-case key features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#lora-testbed">Lora Testbed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="0_Introduction.html#users">Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#hardware-developers">Hardware Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#software-developers">Software Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#data-users">Data Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#platform-users">Platform Users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="0_Introduction.html#use-cases">Use cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#id3">Smart City Sensing and Wireless Testbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#air-quality-sensing">Air Quality Sensing</a></li>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#street-light-monitoring">Street Light monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#large-scale-wireless-testbed">Large Scale Wireless Testbed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#id9">Robotics Testbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#swarm-robotics">SWARM Robotics</a></li>
<li class="toctree-l4"><a class="reference internal" href="0_Introduction.html#private-5g-use-case-for-warehousing-and-logistics">Private 5G Use-case for Warehousing and Logistics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="0_Introduction.html#id15">Lora Testbed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="1_Architecture.html">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="1_Architecture.html#smart-city-sensing-and-wireless-testbed">Smart City Sensing and Wireless Testbed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="1_Architecture.html#hardware">Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#backend-tier">Backend Tier</a></li>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#edge-tier">Edge Tier</a></li>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#endpoint-tier">Endpoint Tier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="1_Architecture.html#software">Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#microservices">Microservices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="1_Architecture.html#robotics-testbed">Robotics Testbed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="1_Architecture.html#id1">Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#robot-specifications">Robot Specifications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="1_Architecture.html#id2">Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#software-stack-layer">Software stack layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#interfaces">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#id3">Microservices</a></li>
<li class="toctree-l4"><a class="reference internal" href="1_Architecture.html#containerized-components">Containerized components</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="1_Architecture.html#lora-testbed">Lora Testbed</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#user-registration">User Registration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#steps">Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#umbrella-networks">Umbrella Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-container-images">Creating Container Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-communication">Data Communication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-binary-images">Creating Binary Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#toolchain-setup">Toolchain Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloning-and-patching-contiki-ng">Cloning and Patching Contiki-NG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-firmware">Building firmware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#robotic-networks">Robotic Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-images">Creating Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#controller-image">Controller Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#radio-simulator-image">Radio Simulator Image</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-configuration">Creating Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#world-files">World Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-binaries">Creating Binaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lora-networks">Lora Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-applications">Creating Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-service-profiles">Creating Service Profiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-profiles">Device Profiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integrations">Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#street-lights">Street Lights</a></li>
<li class="toctree-l2"><a class="reference internal" href="#air-quality-dashboard">Air Quality Dashboard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sensor-api">Sensor API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#login">Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-list-of-nodes">Get List of Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-sensor-data">Get Sensor Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-all-nodes-for-a-sensor">Get All Nodes for a Sensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-list-of-sensors">Get List of Sensors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="99_Contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UMBRELLA Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<p>Here we provide more details about running the experiments on the testbed.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#umbrella-networks"><span class="std std-ref">Umbrella Networks</span></a></p></li>
<li><p><a class="reference internal" href="#robotic-networks"><span class="std std-ref">Robotic Networks</span></a></p></li>
<li><p><a class="reference internal" href="#lora-networks"><span class="std std-ref">Lora Networks</span></a></p></li>
<li><p><a class="reference internal" href="#street-lights"><span class="std std-ref">Street Lights</span></a></p></li>
<li><p><a class="reference internal" href="#air-quality-dashboard"><span class="std std-ref">Air Quality Dashboard</span></a></p></li>
</ul>
<div class="section" id="user-registration">
<h2>User Registration<a class="headerlink" href="#user-registration" title="Permalink to this heading"></a></h2>
<div class="section" id="steps">
<h3>Steps<a class="headerlink" href="#steps" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Visit <a class="reference external" href="https://portal.umbrellaiot.com/">UMBRELLA Portal</a></p></li>
<li><p>Register -&gt; <cite>Create New Account</cite> -&gt; Enter details (First Name, Last Name, Username, Email, Password) -&gt; Create Account</p></li>
<li><p>A email with instructions will be sent to verify your email address.</p></li>
</ol>
</div>
</div>
<div class="section" id="umbrella-networks">
<h2>Umbrella Networks<a class="headerlink" href="#umbrella-networks" title="Permalink to this heading"></a></h2>
<p>The wireless testbed refers to the toolchain that allows users to deploy custom firmware to the <a class="reference external" href="https://www.ti.com/product/CC1310">CC1310 (868MHz)</a> and <a class="reference external" href="https://www.nordicsemi.com/Products/nRF52840">nRF52840 (2.4GHz)</a> programmable radios incorporated into the hardware of the edge nodes, deployed along the A4174 in Bristol.</p>
<p>Below is the process of creating and uploading radio firmware to the testbed and creating an image to be deployed to the edges-node to gather, broadcast and optionally process data. Wireless experiments can include one or all of the edge nodes available on the network and are scheduled at a time and duration specified by the user.</p>
<div class="section" id="id1">
<h3>Steps<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>The section summarises the actions to take to create an experiment, run and view the results using the UMBRELLA portal. It covers using the UMBRELLA portal to deploy both things to the edge nodes. Users can follow through this process with existing example firmware and experiment images.</p>
<ol class="arabic simple">
<li><p>Visit <a class="reference external" href="https://portal.umbrellaiot.com/">UMBRELLA Portal</a> , Login, UMBRELLA HOME &gt; Umbrella Networks</p></li>
<li><p>New Project &gt; Enter <cite>Project Name</cite>, <cite>Description</cite>, <cite>Node Network</cite> (default, dummy Node Network) &gt; <cite>Create Project</cite></p></li>
<li><p>The Network section provides details about the different nodes available.</p></li>
<li><p>The Files section allows users to upload container images (running on Raspberry Pi and Jetson Nano) and Binary images (for nrf52 and cc1310).</p></li>
<li><p>Users can upload container images from a public repo (such as a docker registry or container registry) or a local file (.tar).</p></li>
</ol>

    <video width="500" height="300" controls >
    <source src="_static/Video/Networks_Experiment.mp4" type="video/mp4">
    Video
    </video>
    </div>
<div class="section" id="creating-container-images">
<h3>Creating Container Images<a class="headerlink" href="#creating-container-images" title="Permalink to this heading"></a></h3>
<div class="section" id="data-communication">
<h4>Data Communication<a class="headerlink" href="#data-communication" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Containers shall perform all node data streaming operations via the MQTT broker hosted in the backend. Any software application requiring dataset transmission to the backend is responsible for the creation of its client, topic creation and publish rates.</p></li>
</ul>
<div class="section" id="experiment-mqtt-topics">
<h5>Experiment MQTT Topics<a class="headerlink" href="#experiment-mqtt-topics" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>A user will have to create a project before uploading a container. Doing so will produce a unique project ID.</p></li>
<li><p>The user will then be able to embed this project ID into their experiment source code for creating an MQTT topic in the following format. This container can be re-used between experiments, reporting to the same project-specific topic.​</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">experiment/projectID/streamID/hostName​</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">experiment</span></code>: Fixed category prefix for all experiment-created topics. In the future, UMBRELLA may support many categories. <code class="docutils literal notranslate"><span class="pre">experiment</span></code> identifies the topic as experiment related.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">projectID</span></code>: Unique project ID code generated by the backend upon creating a project. <code class="docutils literal notranslate"><span class="pre">projectID</span></code> identifies the topic as related to a single specific project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">streamID</span></code>: Integer data stream ID. Permits an experiment application to publish multiple topics. <code class="docutils literal notranslate"><span class="pre">streamID</span></code> identifies the topic related to a specific data stream within an experiment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hostName</span></code>: Unique per node. The user’s experiment will gather this at runtime from the software daemon. <code class="docutils literal notranslate"><span class="pre">hostName</span></code> identifies the topic as related to a unique host within an experiment.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="experiment-mqtt-subscriptions">
<h5>Experiment MQTT Subscriptions<a class="headerlink" href="#experiment-mqtt-subscriptions" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>When designing their experiment, a user shall be able to enter the topics they wish to gather data from, which can be none, one or many.</p></li>
<li><p>Any field marked with <code class="docutils literal notranslate"><span class="pre">+</span></code> will accept any value so long as the rest of the topic matches.</p></li>
<li><p>Subscription topic examples:</p>
<ul>
<li><p>All data relevant to the experiment indicated by projectID <code class="docutils literal notranslate"><span class="pre">experiment/projectID/+/+</span></code></p></li>
<li><p>All data from projectID from node-aabbccdd <code class="docutils literal notranslate"><span class="pre">experiment/projectID/+/node-aabbccdd</span></code></p></li>
<li><p>All data from projectID from data stream 10, from all nodes <code class="docutils literal notranslate"><span class="pre">experiment/projectID/10/+</span></code></p></li>
<li><p>All data from projectID from data stream 10, from node-aabbccdd <code class="docutils literal notranslate"><span class="pre">experiment/projectID/10/node-aabbccdd</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="mqtt-results-and-message-body">
<h5>MQTT Results and Message Body<a class="headerlink" href="#mqtt-results-and-message-body" title="Permalink to this heading"></a></h5>
<ul>
<li><p>Each subscription for a specific data stream shall require the user to define a JSON schema of the received data within the portal.</p></li>
<li><p>In the cases where the data stream ID is not specified, a data format cannot be ascertained; thus, the user will not be given the option to map data to a schema and, therefore, cannot be represented within the Grafana GUI.</p></li>
<li><p>Each subscription with a defined schema shall be capable of populating its influx database table, from which it shall be possible for a user to configure a Grafana dashboard of results by assigning one or more fields within the table to one or more Grafana GUI element.</p></li>
<li><p>JSON Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;SensorA&quot;</span><span class="p">:</span><span class="s2">&quot;20&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;SensorB&quot;</span><span class="p">:</span><span class="s2">&quot;40&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="environment-variables">
<h5>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading"></a></h5>
<table class="docutils align-default" id="id26">
<caption><span class="caption-text">Environment Variables that can be accessed by container</span><a class="headerlink" href="#id26" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>Explained</p></th>
<th class="head"><p>Variable Name</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Daemon control interface port</p></td>
<td><p>The network port on which the UMBRELLA software daemon’s control interface operates</p></td>
<td><p>EXP_DAEMON_INTERFACE_PORT</p></td>
<td><p>string</p></td>
<td><p>5555</p></td>
</tr>
<tr class="row-odd"><td><p>MQTT port</p></td>
<td><p>The network port on which the UMBRELLA network’s MQTT broker operates</p></td>
<td><p>EXP_MQTT_PORT</p></td>
<td><p>string</p></td>
<td><p>8883</p></td>
</tr>
<tr class="row-even"><td><p>MQTT Topic Code</p></td>
<td><p>The unique per experiment topic code for all MQTT topics. For example: <cite>experiment/{ExperimentTopicCode}/{streamID}/{hostName}</cite></p></td>
<td><p>EXP_MQTT_TOPIC_CODE</p></td>
<td><p>string</p></td>
<td><p>example-experiment</p></td>
</tr>
<tr class="row-odd"><td><p>Broker Address</p></td>
<td><p>The network address of the UMBRELLA MQTT broker</p></td>
<td><p>EXP_MQTT_BROKER_ADDRESS</p></td>
<td><p>string</p></td>
<td><p>35.189.69.217</p></td>
</tr>
<tr class="row-even"><td><p>Sensor Sub Port</p></td>
<td><p>The network port on which the UMBRELLA software daemon publishes sensor data</p></td>
<td><p>EXP_SENSOR_SUB_PORT</p></td>
<td><p>string</p></td>
<td><p>5556</p></td>
</tr>
<tr class="row-odd"><td><p>Experiment ID</p></td>
<td><p>The string that will be used to identify mqtt data from multiple instances of the same container on a single host</p></td>
<td><p>EXP_ID</p></td>
<td><p>string</p></td>
<td><p>example</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="creating-binary-images">
<h3>Creating Binary Images<a class="headerlink" href="#creating-binary-images" title="Permalink to this heading"></a></h3>
<div class="section" id="toolchain-setup">
<h4>Toolchain Setup<a class="headerlink" href="#toolchain-setup" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>The toolchain setup required to build radio firmware is described in the <a class="reference external" href="https://github.com/contiki-ng/contiki-ng/wiki#setting-up-contiki-ng">Contiki-NG Wiki</a>, select the toolchain appropriate to the operating system (the development team at Toshiba use a native Linux installation).</p></li>
</ul>
</div>
<div class="section" id="cloning-and-patching-contiki-ng">
<h4>Cloning and Patching Contiki-NG<a class="headerlink" href="#cloning-and-patching-contiki-ng" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Radio firmware for the UMBRELLA board can be created by cloning  <a class="reference external" href="https://github.com/contiki-ng/">Contiki-NG</a> and applying a patch on a specific commit. It is recommended that this is used as a starting point for newer users as Contiki-NG provides a well-documented software stack for both the <a class="reference external" href="https://www.ti.com/product/CC1310">CC1310</a> and <a class="reference external" href="https://www.nordicsemi.com/Products/nRF52840">nRF52840</a>  SoCs, available on the UMBRELLA board.</p></li>
<li><p>The patch is available to download <a class="reference download internal" download="" href="_downloads/5401c23878c04b21c05434b8da1d0b8c/0001-umbrella-hardware-support.zip"><code class="xref download docutils literal notranslate"><span class="pre">0001-umbrella-hardware-support.zip</span></code></a></p></li>
</ul>
<p>Clone the repository</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/contiki-ng/contiki-ng.git</span>
</pre></div>
</div>
<p>Initialize the sub-modules</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git submodule update --init</span>
</pre></div>
</div>
<p>Check out the correct commit.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout 705541797d5f3950a4af58c7e73938248d015cdf</span>
</pre></div>
</div>
<p>Apply patch</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git am &lt; [name of umbrella patch file]</span>
</pre></div>
</div>
</div>
<div class="section" id="building-firmware">
<h4>Building firmware<a class="headerlink" href="#building-firmware" title="Permalink to this heading"></a></h4>
<p>Creating firmware for SoCs themselves can be performed more or less following the process described in the <a class="reference external" href="https://github.com/contiki-ng/contiki-ng/wiki">Contiki-NG WiKi</a>.</p>
</div>
</div>
</div>
<div class="section" id="robotic-networks">
<h2>Robotic Networks<a class="headerlink" href="#robotic-networks" title="Permalink to this heading"></a></h2>
<div class="section" id="id4">
<h3>Steps<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Visit <a class="reference external" href="https://portal.umbrellaiot.com/">UMBRELLA Portal</a> , Login, UMBRELLA HOME &gt; Robotic Networks</p></li>
<li><p>New Project &gt; Enter <cite>Project Name</cite>, <cite>Description</cite>, <cite>Arena</cite> (default, dummy Node Network) &gt; <cite>Create Project</cite></p></li>
<li><p>The Files section provides a user to upload container images (for running on Controller and Radio Simulator), configurations (for Configuration and World) and Binary images (for nrf52 and cc1310).</p></li>
<li><p>Users can upload container images from a public repo (such as a docker registry or container registry) or a local file (.tar).</p></li>
<li><p>Specify the duration of the experiment.</p></li>
<li><p>Validate experiment containers with the simulator to check that they are operating correctly, by running the experiments containers, together with a simulator container, using the real arena environment files.</p></li>
<li><p>Run the simulations.</p></li>
<li><p>Observe the progress through the Gazebo web view.</p></li>
<li><p>Results of the experiments are returned and displayed on the Umbrella portal interface.</p>
<blockquote>
<div>
    <video width="500" height="300" controls >
    <source src="_static/Video/Robots_Experiment.mp4" type="video/mp4">
    Video
    </video>
    </div></blockquote>
</li>
</ol>
<ul>
<li><p>The digital twin setup and steps required for deployment are illustrated below. The <code class="docutils literal notranslate"><span class="pre">ARM</span></code> and <code class="docutils literal notranslate"><span class="pre">X86_64</span></code> VM configurations supporting the digital twins run experiment containers in the same manner as the physical arena. Limiting the number of robot instances permitted (e.g. 120) to run in the simulator VM is possible. The main differences between the simulator and real arena deployments are that in the arena, the maximum number of robots is 20. An additional radio simulation container and configuration files are permitted per experiment in the simulator.</p>
<blockquote>
<div><div class="figure align-center" id="id27">
<a class="reference internal image-reference" href="_images/Digital_Twin_Simulator.png"><img alt="Digital twin simulator setup within Cloud EKS cluster" src="_images/Digital_Twin_Simulator.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Digital twin simulator setup within Cloud EKS cluster</span><a class="headerlink" href="#id27" title="Permalink to this image"></a></p>
</div>
<div class="figure align-center" id="id28">
<a class="reference internal image-reference" href="_images/Simulation_Experiment_Flow_Cloud_VM.png"><img alt="Flow for setting up simulation experiment in cloud VM" src="_images/Simulation_Experiment_Flow_Cloud_VM.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Flow for setting up simulation experiment in cloud VM</span><a class="headerlink" href="#id28" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
</li>
<li><p>The experiment software will be deployed and interact with the simulator container in the same manner as the robot nodes (i.e. using ROSv2 and DDS). The portal allows uploading and setting the environment model, selecting the number of robot nodes from those available, and viewing the arena video and ground truth.</p>
<blockquote>
<div><div class="figure align-center" id="id29">
<a class="reference internal image-reference" href="_images/Robot_Ground_Truth_Map_Simulator_View.png"><img alt="Ground truth map view (left) and simulator view (right)" src="_images/Robot_Ground_Truth_Map_Simulator_View.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Ground truth map view (left) and simulator view (right)</span><a class="headerlink" href="#id29" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
</li>
<li><p>The ROS2 bags and ground truth data are stored locally, which can be visualised or downloaded via the portal. It happens the same way in the real arena robot, but the main difference is obviously in a cloud VM environment.</p></li>
<li><p>The Gazebo web client interface is used only for visualising the GUI output of the simulator to the users within WebGL-compliant browsers. The association of experiment containers with simulator instances uses a separate Kubernetes cluster for each simulation instance.</p></li>
</ul>
<p>Validate experiments before using the arena</p>
<ul class="simple">
<li><p>The user can use the simulation environment first to validate an experiment. In validation mode, Users cannot override the world files. The experiment must complete successfully, without any robot or wall collisions, to be permitted to run in the arena. Once the experiment has been validated in the simulation environment, the user can run the experiment in the arena.</p></li>
</ul>
<p>Experiment process</p>
<ul>
<li><p>In both the simulation and arena environments, the experiment containers are deployed when the experiment starts. A first-in, first-out queue is used to schedule the start times.</p></li>
<li><p>After the experiment starts, the containers initialise and subscribe to the ROS2 topics.</p></li>
<li><p>In the simulator environment, the containers also need to spawn the robot model instance in the Gazebo simulator. Containers are passed the environment variable <code class="docutils literal notranslate"><span class="pre">ROBOTSIM</span></code>, whose value is <code class="docutils literal notranslate"><span class="pre">true</span></code> when running in the simulator.</p></li>
<li><p>The start position and orientation of the robot are passed as an environment variable <code class="docutils literal notranslate"><span class="pre">ROBOTPOSE</span></code> which provides the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> coordinates from the centre reference and the orientation in radians. For example; <code class="docutils literal notranslate"><span class="pre">1.0,-1.0,0.5</span></code>. In addition, the <code class="docutils literal notranslate"><span class="pre">ROBOTID</span></code> environment variable contains the friendly name of the robot instance. An additional environment variable called <code class="docutils literal notranslate"><span class="pre">controllerOptions</span></code> is passed to the experiment containers containing the controller option to run for the experiment.</p></li>
<li><p>The spawning of the robot models is performed using the following bootstrap code in the experiment container</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>controller_cmd = Node(
package     = &#39;dots_example_controller&#39;,
executable  = controller_option,
namespace   = robot_name,
output      = &#39;screen&#39;,
parameters  = [ {&#39;use_sim_time&#39; : use_sim_time}]
)
</pre></div>
</div>
</li>
<li><p>For both simulation and robot environments, the log data can be recorded in ROS2 bags using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ld</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="n">ExecuteProcess</span><span class="p">(</span>
    <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ros2&#39;</span><span class="p">,</span> <span class="s1">&#39;bag&#39;</span><span class="p">,</span> <span class="s1">&#39;record&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--compression-mode&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--compression-format&#39;</span><span class="p">,</span> <span class="s1">&#39;zstd&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;/storage/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bag_name</span><span class="p">,</span>
        <span class="s1">&#39;/</span><span class="si">%s</span><span class="s1">/odom&#39;</span> <span class="o">%</span> <span class="n">bag_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-0&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)],</span>
    <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span>
<span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>When the user is running an experiment, ROS2 bags can be recorded in the experiment container <code class="docutils literal notranslate"><span class="pre">/storage</span></code> folder so that the user can download them after the experiment has been completed.</p></li>
<li><p>Message sequence diagram for the digital twin simulation is shown below:</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="_images/Message_sequence_diagram_digital_twin_simulation.png"><img alt="Ground truth map view (left) and simulator view (right)" src="_images/Message_sequence_diagram_digital_twin_simulation.png" style="width: 600px;" /></a>
</div>
</div></blockquote>
</li>
<li><p>The contents can include the ground truth odometry data that the user can use to evaluate the experiment. Video, ground truth or simulator visualisations are provided in the portal during the experiment. Users can cancel the experiment in the event of any unintended behaviour.</p></li>
</ul>
</div>
<div class="section" id="creating-images">
<h3>Creating Images<a class="headerlink" href="#creating-images" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The user must build container images to create and run experiments in the physical robot arena and simulation environments.</p></li>
<li><p>We describe how to build the experiment Docker container images, with instructions for the robot simulator testbed, using an example Docker radio simulator container: <code class="docutils literal notranslate"><span class="pre">timfa/radiosimulator:latest</span></code>. Alternatively, the pre-built <code class="docutils literal notranslate"><span class="pre">timfa/controller:base</span></code> controller image can be used if only the main controller python files are being customised, as they can be loaded at runtime.</p></li>
<li><p>All container images are security scanned for vulnerabilities and must not be higher than a medium level to be permitted to run on the testbed.</p></li>
</ul>
<div class="section" id="controller-image">
<h4>Controller Image<a class="headerlink" href="#controller-image" title="Permalink to this heading"></a></h4>
<p>The below example shows an experiment container with images that contain the robot controller code and utilise the ROS2 galactic release as the basis for accessing sensors, cameras, motors and actuators.</p>
<p>The example Dockerfile below is used to build the base experiment controller. The following Docker command builds and pushes the file to the Docker hub (using <code class="docutils literal notranslate"><span class="pre">moby/buildkit:buildx-stable-1</span></code>) : <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">buildx</span> <span class="pre">build</span> <span class="pre">--platform</span> <span class="pre">linux/arm64</span> <span class="pre">-t</span> <span class="pre">&lt;container</span> <span class="pre">image&gt;</span>&#160; <span class="pre">--push</span> <span class="pre">.</span></code></p>
<p>To build the file directly on an <code class="docutils literal notranslate"><span class="pre">ARM64</span></code> node without cross-compiling it, use: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">-t</span> <span class="pre">&lt;container</span> <span class="pre">image&gt;</span> <span class="pre">.</span></code> The image can be imported directly from the Docker hub into the robot simulator testbed.</p>
<p>The contents of the example <code class="docutils literal notranslate"><span class="pre">timfa/controller:base</span></code> Dockerfile is as follows:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="c">#------------------------------------------------------------------</span>
<span class="c"># Use the official ros-galactic image to build the package</span>


<span class="k">FROM</span><span class="w"> </span><span class="s">arm64v8/ros:galactic</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">appBuilder</span>


<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/home/dots/dots_system</span>
<span class="k">ADD</span><span class="w"> </span>src src

<span class="k">RUN</span><span class="w"> </span>apt -y update <span class="o">&amp;&amp;</span> apt -y upgrade
<span class="k">RUN</span><span class="w"> </span>apt install ros-galactic-xacro
<span class="k">RUN</span><span class="w"> </span>git clone https://github.com/splintered-reality/py_trees_ros_interfaces.git -b release/2.0.x
<span class="k">RUN</span><span class="w"> </span>git clone https://github.com/splintered-reality/py_trees_ros.git -b release/2.1.x
<span class="k">RUN</span><span class="w"> </span>git clone https://github.com/ros-perception/image_common.git -b galactic
<span class="k">RUN</span><span class="w"> </span>git clone https://github.com/ros2/rcpputils.git -b galactic
<span class="k">RUN</span><span class="w"> </span>apt -y install unzip wget ros-galactic-cv-bridge ros-galactic-vision-opencv ros-galactic-gazebo-ros-pkgs
<span class="k">RUN</span><span class="w"> </span>git clone https://github.com/Tim-222/aruco.git
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/home/dots/dots_system/aruco</span>
<span class="k">RUN</span><span class="w"> </span>cmake CMakeLists.txt
<span class="k">RUN</span><span class="w"> </span>make <span class="o">&amp;&amp;</span> make install
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/home/dots/dots_system</span>

<span class="k">RUN</span><span class="w"> </span>bash -c <span class="s1">&#39;source /opt/ros/galactic/setup.bash \</span>
<span class="s1">&amp;&amp;   aruco_DIR=/home/dots/dots_system/aruco colcon build --merge-install&#39;</span>


<span class="c">#------------------------------------------------------------------</span>
<span class="c"># Start from a minimal image and just install what is necessary for</span>
<span class="c"># ros to run</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu:focal</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive
<span class="k">RUN</span><span class="w"> </span>apt-get update <span class="o">&amp;&amp;</span> apt -y full-upgrade <span class="o">&amp;&amp;</span> apt-get -y -t focal-security  install   <span class="se">\</span>
    libpython3.8 <span class="se">\</span>
    libspdlog-dev <span class="se">\</span>
    libtinyxml-dev <span class="se">\</span>
    libtinyxml2-dev <span class="se">\</span>
    python3-lark <span class="se">\</span>
    python3-yaml <span class="se">\</span>
    python3-numpy <span class="se">\</span>
    python3-setuptools <span class="se">\</span>
    python3-netifaces <span class="se">\</span>
    python3-pip
<span class="k">RUN</span><span class="w"> </span>pip install <span class="nv">py_trees</span><span class="o">==</span><span class="m">2</span>.1.5
<span class="k">RUN</span><span class="w"> </span>pip install packaging
<span class="c"># Ros files</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /opt/ros/galactic/ /opt/ros/galactic
<span class="c"># Opencv libraries</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libopencv* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libtbb* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libjpeg* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libwebp* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libpng* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgdcmMSFF* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libtiff* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libIlmImf* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/libgdal* /usr/lib/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgdcm* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libopenjp2* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libCharLS* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libjson-c* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libjbig* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libHalf* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libIex* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libIlmThread* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/libarmadillo* /usr/lib/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libpoppler* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libqhull* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libfreexl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgeos* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libepsilon* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libodbc* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libkml* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libxerces* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libnetcdf* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libhdf5* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/libmfhdfalt* /usr/lib/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/libdfalt* /usr/lib/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/libogdi* /usr/lib/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgif* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgeotiff* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libcfitsio* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libpq* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libproj* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libdap* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libspatialite* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libcurl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libfy* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libxml* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libmysql* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libarpack* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libsuper* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libfreetype* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libfontconfig* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/liblcms* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libnss* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libsmime* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libnspr* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libltdl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libminizip* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/liburiparser* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libicu* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libsz* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libgss* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libldap* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libnghttp* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/librtmp* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libssh* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libpsl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/liblber* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libbrot* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libpl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libaec* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libkrb* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libk5crypto* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libsasl* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libkeyutils* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libheim* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libasn* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libhcrypto* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libroken* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libwind* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/lib/aarch64-linux-gnu/libhx* /usr/lib/aarch64-linux-gnu/
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder /usr/local/lib/libaruco.so.3.1 /usr/lib/aarch64-linux-gnu/

<span class="k">RUN</span><span class="w"> </span>rm -rf /opt/ros/galactic/include
<span class="k">RUN</span><span class="w"> </span>rm -rf /usr/include


<span class="c"># Clear up</span>
<span class="k">RUN</span><span class="w"> </span>apt-get -y install strace
<span class="k">RUN</span><span class="w"> </span>apt-get -y install wget
<span class="k">RUN</span><span class="w"> </span>apt-get clean autoclean
<span class="k">RUN</span><span class="w"> </span>apt-get autoremove --yes
<span class="k">RUN</span><span class="w"> </span>rm -rf /var/lib/apt/lists/*

<span class="c"># Mount point for storage volume</span>
<span class="k">RUN</span><span class="w"> </span>mkdir /storage

<span class="c"># Make user</span>
<span class="k">ARG</span><span class="w"> </span>UID
<span class="k">ARG</span><span class="w"> </span>GID
<span class="k">ARG</span><span class="w"> </span>HOSTOSTYPE
<span class="k">ENV</span><span class="w"> </span><span class="nv">SHELL</span><span class="o">=</span>/bin/bash
<span class="k">RUN</span><span class="w"> </span>mkdir /home/dots
<span class="k">RUN</span><span class="w"> </span>mkdir /home/dots/dots_system
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/home/dots/dots_system</span>
<span class="k">ADD</span><span class="w"> </span>docker/scripts/start_controller .

<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>appBuilder  /home/dots/dots_system/install /home/dots/dots_system/install
<span class="k">RUN</span><span class="w"> </span>chmod +x install/share/dots_sim/launch/rsp_helper.sh
</pre></div>
</div>
<p>When building a final controller image, the entry point command needs to be added, such as:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">timfa/controller:base</span>
<span class="k">ADD</span><span class="w"> </span>loadmodels.sh .
<span class="k">RUN</span><span class="w"> </span>/bin/bash -c <span class="s2">&quot;source ./install/setup.bash&quot;</span>
<span class="k">CMD</span><span class="w"> </span>./loadmodels.sh
</pre></div>
</div>
<p>In this case, the <code class="docutils literal notranslate"><span class="pre">loadmodules.sh</span></code> is loading the controller script from the radio simulator container (this could also load the local controller or from an alternative remote location). Override the <code class="docutils literal notranslate"><span class="pre">loadmodules.sh</span></code> to customise how the initial controller scripts are loaded.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span>Get the controller module
<span class="go">wget http://radiosimulator:80/${controllerOptions}.txt</span>
<span class="go">cp ${controllerOptions}.txt install/lib/python3.8/site-packages/dots_example_controller/${controllerOptions}.py</span>
<span class="gp">#</span>Run the controller
<span class="go">rm -r /storage/$ROBOTID</span>
<span class="go">rm /storage/${ROBOTID%-*}.log</span>
<span class="go">bash /home/dots/dots_system/start_controller robot_name:=${ROBOTID%-*} robot_pose:=$ROBOTPOSE use_sim_time:=$ROBOTSIM controllerOptions:=$controllerOptions &gt; /storage/${ROBOTID%-*}.log 2&gt;&amp;1</span>
</pre></div>
</div>
<p>In this example:</p>
<ul class="simple">
<li><p>The experiment controller files are placed in the subfolder <code class="docutils literal notranslate"><span class="pre">install</span></code>.</p></li>
<li><p>In this case, the launch script (<code class="docutils literal notranslate"><span class="pre">start_controller</span></code>) is in the docker/scripts folder.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROBOTID</span></code> contains the friendly name for the robot (provided in the portal).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROBOTPOSE</span></code> contains the start position and orientation (x,y, theta) provided in the configuration file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROBOTSIM</span></code> is either true or false to indicate whether the experiment is running in the simulation environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">controllerOptions</span></code> is set to the name of the controller file (pulled from the radio simulator container in this case)</p></li>
</ul>
<div class="section" id="example-container">
<h5>Example container<a class="headerlink" href="#example-container" title="Permalink to this heading"></a></h5>
<p>The experiment container contains the Robot controller. The following launch file executes the commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source install/setup.bash</span>
<span class="go">ros2 launch dots_example_controller controller.launch.py &quot;$@&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">controller.launch.py</span></code> is the Python code for the controller initialisation in this instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>if the logs need to be recorded for post-experiment analysis, they have been placed in the docker container’s <code class="docutils literal notranslate"><span class="pre">/storage</span></code> folder. The example below dumped the <code class="docutils literal notranslate"><span class="pre">odom</span></code> ROS2 topics into the <code class="docutils literal notranslate"><span class="pre">/storage</span></code> folder. The <code class="docutils literal notranslate"><span class="pre">/&lt;robot</span> <span class="pre">name&gt;/odom</span></code> topic contains the robot’s ground truth position and orientation data. In the simulation environment, the robot name is the friendly <code class="docutils literal notranslate"><span class="pre">ROBOTID</span></code>, as provided in the experiment configuration on the portal. However, in the arena deployment, the physical robot hostname, with a hyphen replaced by an underscore, is used for the name, which is <code class="docutils literal notranslate"><span class="pre">umbrella_&lt;robot</span> <span class="pre">id</span> <span class="pre">hash&gt;</span></code>.</p>
</div>
<p><strong>controller.launch.py</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">ExecuteProcess</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span>
<span class="kn">from</span> <span class="nn">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span><span class="p">,</span> <span class="n">FrontendLaunchDescriptionSource</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_share</span>       <span class="o">=</span> <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;dots_example_controller&#39;</span><span class="p">)</span>

    <span class="n">controller_option</span> <span class="o">=</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;controllerOptions&#39;</span><span class="p">)</span>
    <span class="n">use_sim_time</span>    <span class="o">=</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;use_sim_time&#39;</span><span class="p">)</span>
    <span class="n">robot_name</span>      <span class="o">=</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;robot_name&#39;</span><span class="p">)</span>

    <span class="n">declare_use_sim_time</span>    <span class="o">=</span> <span class="n">DeclareLaunchArgument</span><span class="p">(</span><span class="s1">&#39;use_sim_time&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;true&#39;</span><span class="p">)</span>
    <span class="n">declare_robot_name</span>      <span class="o">=</span> <span class="n">DeclareLaunchArgument</span><span class="p">(</span><span class="s1">&#39;robot_name&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;robot_deadbeef&#39;</span><span class="p">)</span>


    <span class="n">setup_cmd</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="n">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_share</span><span class="p">,</span> <span class="s1">&#39;launch&#39;</span><span class="p">,</span> <span class="s1">&#39;basic_cam.launch.py&#39;</span><span class="p">)),</span>
    <span class="p">)</span>


    <span class="c1">#---------------------------------------------------------------------------</span>
    <span class="c1"># CONTROLLER OPTION HAS YOUR CONTROLLER</span>
    <span class="c1">#---------------------------------------------------------------------------</span>
    <span class="n">controller_cmd</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
        <span class="n">package</span>     <span class="o">=</span> <span class="s1">&#39;dots_example_controller&#39;</span><span class="p">,</span>
        <span class="n">executable</span>  <span class="o">=</span> <span class="n">controller_option</span><span class="p">,</span>
        <span class="n">namespace</span>   <span class="o">=</span> <span class="n">robot_name</span><span class="p">,</span>
        <span class="n">output</span>      <span class="o">=</span> <span class="s1">&#39;screen&#39;</span><span class="p">,</span>
        <span class="n">parameters</span>  <span class="o">=</span> <span class="p">[</span> <span class="p">{</span><span class="s1">&#39;use_sim_time&#39;</span> <span class="p">:</span> <span class="n">use_sim_time</span><span class="p">}]</span>
    <span class="p">)</span>
    <span class="c1">#---------------------------------------------------------------------------</span>



    <span class="c1"># Build the launch description</span>
    <span class="n">ld</span> <span class="o">=</span> <span class="n">LaunchDescription</span><span class="p">()</span>

    <span class="n">bag_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ROBOTID&#39;</span><span class="p">)</span>

    <span class="n">ld</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="n">ExecuteProcess</span><span class="p">(</span>
        <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ros2&#39;</span><span class="p">,</span> <span class="s1">&#39;bag&#39;</span><span class="p">,</span> <span class="s1">&#39;record&#39;</span><span class="p">,</span>
            <span class="s1">&#39;--compression-mode&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">,</span>
            <span class="s1">&#39;--compression-format&#39;</span><span class="p">,</span> <span class="s1">&#39;zstd&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;/storage/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bag_name</span><span class="p">,</span>
            <span class="s1">&#39;/</span><span class="si">%s</span><span class="s1">/odom&#39;</span> <span class="o">%</span> <span class="n">bag_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-0&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)],</span>
        <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span>
    <span class="p">))</span>

    <span class="n">ld</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">declare_use_sim_time</span><span class="p">)</span>
    <span class="n">ld</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">declare_robot_name</span><span class="p">)</span>
    <span class="n">ld</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">setup_cmd</span><span class="p">)</span>
    <span class="n">ld</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">controller_cmd</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ld</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="radio-simulator-image">
<h4>Radio Simulator Image<a class="headerlink" href="#radio-simulator-image" title="Permalink to this heading"></a></h4>
<ul>
<li><p>Users can define their radio simulators to run on the testbed platform. It uses the virtual serial port redirection to emulate the radios. These are exposed in the controller containers as serial ports, which can be used with ROS2 over <a class="reference external" href="https://github.com/osrf/ros2_serial_example">serial code examples</a>.</p></li>
<li><p>The COBS encapsulation can be used to delimit the messages intercepted and redirected to the radio simulator container. The radio simulator containers expose HTTP port 80 as a REST API to emulate the radio performance. The REST API definition for the radio serial port redirected messages <code class="docutils literal notranslate"><span class="pre">/msg</span></code> is called each time a message is redirected from a specific serial port on each robot.</p></li>
<li><p>The response contains the recipients of the message and the corresponding performance:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;/msg&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w"> </span><span class="s">&quot;post&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">“Redirected messages to the simulator&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;parameters&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;experimentid&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;in&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;query&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;required&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;style&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;form&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;explode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;schema&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;string&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;robotid&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;in&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;query&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;required&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;style&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;form&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;explode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;schema&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;string&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;radioid&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;in&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;query&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;required&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;style&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;form&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;explode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;schema&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;string&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;requestBody&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">   </span><span class="s">&quot;content&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;application/octet-stream&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;schema&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;object&quot;</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">   </span><span class="s">&quot;required&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;responses&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">   </span><span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Returns</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">JSON</span><span class="nv"> </span><span class="s">object</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">radio</span><span class="nv"> </span><span class="s">performance&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;security&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;default&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>The JSON result object specifies the latency (in ms) and the success rate for each destination radio corresponding to the robots. An example of the JSON return data is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;robot&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r01&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NRF52840 &quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;latency&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.1</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;successrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9993</span><span class="w"></span>
<span class="w">      </span><span class="p">}]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r02&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NRF52840 &quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;latency&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.1</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;successrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9993</span><span class="w"></span>
<span class="w">      </span><span class="p">}]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r03&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NRF52840 &quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;latency&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.1</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;successrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9993</span><span class="w"></span>
<span class="w">      </span><span class="p">}]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r04&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NRF52840 &quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;latency&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.1</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;successrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9993</span><span class="w"></span>
<span class="w">      </span><span class="p">}]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>In addition, the <code class="docutils literal notranslate"><span class="pre">/groundtruth</span></code> API permits the periodic updating of the ground truth data with the radio simulator. The update rate is specified in the experiment configuration file. The radio simulator <code class="docutils literal notranslate"><span class="pre">/groundtruth</span></code> API is then called at this rate. Note that the update rate is in real time rather than simulator time. Simulation time is encapsulated in the sec and nano sec parameters in the time stamp object of the ground truth JSON.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;/groundtruth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;post&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Update the ground truth robot position and orientation data&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">     </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;experimentid&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;query&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;style&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;form&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;explode&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;requestBody&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;application/json&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="nt">&quot;schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="p">},</span><span class="w"></span>
<span class="w">     </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="w"></span>
<span class="w">     </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">     </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">     </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>The ground truth contains an array of groundtruth data corresponding to each robot or other object. The data includes the odometry elements for each object. An example JSON groundtruth object is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;groundtruth&quot;: [
    {
      &quot;object_id&quot;: &quot;r01&quot;,
      &quot;header&quot;: {
   &quot;frame_id&quot;: &quot;odom&quot;,
          &quot;stamp&quot;: {
          &quot;sec&quot;: 1234,
          &quot;nanosec&quot;: 1234
      }
       }
       &quot;child_frame_id&quot;: &quot;base_plate&quot;,
       &quot;pose&quot;: {
         &quot;pose&quot;: {
          &quot;position&quot;: {
            &quot;x&quot;: 1,
            &quot;y&quot;: 2,
            &quot;z&quot;: 3
       },
       &quot;orientation&quot;: {
         &quot;x&quot;: 1,
         &quot;y&quot;: 2,
         &quot;z&quot;: 3,
         “w&quot;: 4`
       }
     }
   ……
 ]
}
</pre></div>
</div>
</li>
</ul>
<div class="section" id="example-radio-simulator-in-c">
<h5>Example radio simulator in C#<a class="headerlink" href="#example-radio-simulator-in-c" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>The following example is a radio simulator controller written in C#. This can be encapsulated in a container using the <code class="docutils literal notranslate"><span class="pre">aspnet:3.1-focal</span> <span class="pre">base</span></code> to permit deployment in Linux containers. This is supported in Visual Studio 2019 version 16.11 and above. The radio simulator listens on HTTP port 80 and serves the REST APIs for controlling the serial port message redirects. It also optionally serves the Controller python scripts if the controller content is placed in the project’s content directory. In this way, it is only necessary to update the single container when testing new controllers and radio algorithms.</p></li>
</ul>
<blockquote>
<div><div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Diagnostics</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Threading.Tasks</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">Microsoft.AspNetCore.Mvc</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">Microsoft.Extensions.Logging</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">RadioSimulator.Models</span><span class="p">;</span><span class="w"></span>


<span class="k">namespace</span><span class="w"> </span><span class="nn">RadioSimulator.Controllers</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//Position and orientation coordinates</span>
<span class="w">    </span><span class="c1">//Position in cartersian and orientation in quaternion</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Position</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// coordinates in metres from origin (centre)</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Orientation</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Orientation in Quaternion radians</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Pose</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Pose consisting of position and orientation</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Position</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="n">orientation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PoseHolder</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Pose</span><span class="w"> </span><span class="n">pose</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Stamp</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Timestamp</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sec</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nanosec</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Header</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">frame_id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Stamp</span><span class="w"> </span><span class="n">stamp</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="p">}</span><span class="w"></span>


<span class="w">    </span><span class="c1">//Ground Truth Data Structure</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GTData</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">object_id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Header</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">child_frame_id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">PoseHolder</span><span class="w"> </span><span class="n">pose</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GTRequest</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">GTData</span><span class="p">[]</span><span class="w"> </span><span class="n">groundtruth</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Radio</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">latency</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">successrate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Robot</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Radio</span><span class="p">[]</span><span class="w"> </span><span class="n">radio</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">simResponse</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Robot</span><span class="p">[]</span><span class="w"> </span><span class="n">robot</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Error</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Main controller class</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">HomeController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Controller</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">ILogger</span><span class="p">&lt;</span><span class="n">HomeController</span><span class="p">&gt;</span><span class="w"> </span><span class="n">_logger</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">GTRequest</span><span class="w"> </span><span class="n">gtCache</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w"></span>


<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">HomeController</span><span class="p">(</span><span class="n">ILogger</span><span class="p">&lt;</span><span class="n">HomeController</span><span class="p">&gt;</span><span class="w"> </span><span class="n">logger</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">_logger</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">logger</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Index</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">View</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Privacy</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">View</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="na">[ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">IActionResult</span><span class="w"> </span><span class="nf">Error</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">View</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ErrorViewModel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">RequestId</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Activity</span><span class="p">.</span><span class="n">Current</span><span class="p">?.</span><span class="n">Id</span><span class="w"> </span><span class="p">??</span><span class="w"> </span><span class="n">HttpContext</span><span class="p">.</span><span class="n">TraceIdentifier</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>


<span class="w">        </span><span class="na">[HttpPost(&quot;msg/&quot;)]</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">JsonResult</span><span class="w"> </span><span class="nf">PostMsg</span><span class="p">([</span><span class="n">FromQuery</span><span class="p">]</span><span class="kt">string</span><span class="w"> </span><span class="n">experimentid</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">FromQuery</span><span class="p">]</span><span class="kt">string</span><span class="w"> </span><span class="n">robotid</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">FromQuery</span><span class="p">]</span><span class="kt">string</span><span class="w"> </span><span class="n">radioid</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gtCache</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">Error</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">error</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;No ground truth data available&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nf">Json</span><span class="p">(</span><span class="n">error</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="n">simResponse</span><span class="w"> </span><span class="n">simResponse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">simResponse</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Robot</span><span class="p">[</span><span class="n">gtCache</span><span class="p">.</span><span class="n">groundtruth</span><span class="p">.</span><span class="n">Length</span><span class="p">];</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">robot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">robot</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">gtCache</span><span class="p">.</span><span class="n">groundtruth</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">robot</span><span class="p">++)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>

<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Robot</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">gtCache</span><span class="p">.</span><span class="n">groundtruth</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">object_id</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">radio</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Radio</span><span class="p">[</span><span class="m">1</span><span class="p">];</span><span class="w"></span>

<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">radio</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Radio</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">radio</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">radioid</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">radio</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">latency</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">simResponse</span><span class="p">.</span><span class="n">robot</span><span class="p">[</span><span class="n">robot</span><span class="p">].</span><span class="n">radio</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">successrate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="p">}</span><span class="w"></span>


<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">Json</span><span class="p">(</span><span class="n">simResponse</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="na">[HttpPost(&quot;groundtruth/&quot;)]</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">ActionResult</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">PostGT</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span><span class="w"> </span><span class="n">GTRequest</span><span class="w"> </span><span class="n">gtData</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">FromQuery</span><span class="p">]</span><span class="kt">string</span><span class="w"> </span><span class="n">experimentid</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>

<span class="w">            </span><span class="n">gtCache</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">gtData</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;ok&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="example-docker-file-to-build-the-radio-simulator-experiment-container-image">
<h5>Example Docker file to build the radio simulator experiment container image<a class="headerlink" href="#example-docker-file-to-build-the-radio-simulator-experiment-container-image" title="Permalink to this heading"></a></h5>
<p>Users can obtain the example image from <code class="docutils literal notranslate"><span class="pre">timfa/radiosimulator:latest</span></code> Note that the ubuntu base images need to be used to avoid image vulnerability issues.</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="c">#------------------------------------------------------------------</span>
<span class="c"># Radio Simulator Controller example - experiment container</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/aspnet:3.1-focal</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">base</span>
<span class="k">RUN</span><span class="w"> </span>apt -y update <span class="o">&amp;&amp;</span> apt-get -y upgrade
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">80</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/core/sdk:3.1-focal</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">build</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/src</span>
<span class="k">COPY</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;RadioSimulator/RadioSimulator.csproj&quot;</span>, <span class="s2">&quot;RadioSimulator/&quot;</span><span class="o">]</span>
<span class="k">RUN</span><span class="w"> </span>dotnet restore <span class="s2">&quot;RadioSimulator/RadioSimulator.csproj&quot;</span>
<span class="k">COPY</span><span class="w"> </span>. .
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">&quot;/src/RadioSimulator&quot;</span>
<span class="k">RUN</span><span class="w"> </span>dotnet build <span class="s2">&quot;RadioSimulator.csproj&quot;</span> -c Release -o /app/build

<span class="k">FROM</span><span class="w"> </span><span class="s">build</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">publish</span>
<span class="k">RUN</span><span class="w"> </span>dotnet publish <span class="s2">&quot;RadioSimulator.csproj&quot;</span> -c Release -o /app/publish

<span class="k">FROM</span><span class="w"> </span><span class="s">base</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">final</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>publish /app/publish .
<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;dotnet&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;RadioSimulator.dll&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-configuration">
<h3>Creating Configuration<a class="headerlink" href="#creating-configuration" title="Permalink to this heading"></a></h3>
<div class="section" id="configuration-files">
<h4>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Configuration files are used to run the experiment.</p></li>
<li><p>Below is an example of a configuration file to run experiments in the physical robotics arena and simulations. The configuration options are passed to the controller and gazebo containers at the startup of the simulation.</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">robotPreferences</span></code> section describes the start position and orientation of the robot instances and is passed in <code class="docutils literal notranslate"><span class="pre">ROBOTPOSE</span></code> and <code class="docutils literal notranslate"><span class="pre">ROBOTID</span></code> variables.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">controllerOptions</span></code> environment variable is passed to all the controller containers that permit loading different controller configurations.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">gazeboOptions</span></code> variable is passed to the Gazebo container and consists of the delivery order and manual start flags separated by the dash (-).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">UPDATERATE</span></code> variable is used for simulation time step control, and the delimiter is the serial port message delimiter required for passing messages to the radio simulator for emulation of the radio devices where the radio devices in use are mapped to serial ports (<code class="docutils literal notranslate"><span class="pre">/dev/ttyACMX</span></code>) using the radios list, with <code class="docutils literal notranslate"><span class="pre">X</span></code> denoted by the radio index.</p></li>
</ul>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">robotPreference</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb00</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb01</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb02</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb03</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb04</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb05</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb06</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb05</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb06</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb07</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb08</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb09</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb010</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robotId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rb011</span><span class="w"></span>
<span class="w">    </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1.5</span><span class="w"></span>
<span class="w">    </span><span class="nt">theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="nt">radios</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NRF52840</span><span class="w"></span>
<span class="nt">updaterate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span><span class="w"></span>
<span class="nt">delimiter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00</span><span class="w"></span>
<span class="nt">controllerOptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">carry</span><span class="w"></span>
<span class="nt">gazeboOptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0,1,2,3,4,5-false</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="world-files">
<h4>World Files<a class="headerlink" href="#world-files" title="Permalink to this heading"></a></h4>
<p>World files are used in simulation experiments to define the configuration of the environment of the test. Using <a class="reference external" href="http://sdformat.org/spec">SDF</a>, create world files with the configuration required for the experiment.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">&#39;1.6&#39;</span><span class="nt">&gt;</span>
 <span class="nt">&lt;world</span> <span class="na">name=</span><span class="s">&#39;default&#39;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;physics</span> <span class="na">name=</span><span class="s">&#39;default_physics&#39;</span> <span class="na">default=</span><span class="s">&#39;0&#39;</span> <span class="na">type=</span><span class="s">&#39;ode&#39;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;max_step_size&gt;</span>0.002<span class="nt">&lt;/max_step_size&gt;</span>
     <span class="nt">&lt;real_time_factor&gt;</span>1<span class="nt">&lt;/real_time_factor&gt;</span>
     <span class="nt">&lt;real_time_update_rate&gt;</span>500<span class="nt">&lt;/real_time_update_rate&gt;</span>
     <span class="nt">&lt;ode&gt;</span> <span class="nt">&lt;solver&gt;</span> <span class="nt">&lt;type&gt;</span>quick<span class="nt">&lt;/type&gt;</span> <span class="nt">&lt;/solver&gt;</span> <span class="nt">&lt;/ode&gt;</span>
   <span class="nt">&lt;/physics&gt;</span>
   <span class="nt">&lt;scene&gt;</span>
     <span class="nt">&lt;ambient&gt;</span>0.4 0.4 0.4 1<span class="nt">&lt;/ambient&gt;</span>
     <span class="nt">&lt;background&gt;</span>0.7 0.7 0.7 1<span class="nt">&lt;/background&gt;</span>
     <span class="nt">&lt;shadows&gt;</span>0<span class="nt">&lt;/shadows&gt;</span>
   <span class="nt">&lt;/scene&gt;</span>
   <span class="nt">&lt;gui&gt;</span>
     <span class="nt">&lt;camera</span> <span class="na">name=</span><span class="s">&quot;user_camera&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;pose&gt;</span>0.0 -5.0 5 0 0.8 1.5709<span class="nt">&lt;/pose&gt;</span>
     <span class="nt">&lt;/camera&gt;</span>
   <span class="nt">&lt;/gui&gt;</span>
   <span class="nt">&lt;include&gt;</span>
     <span class="nt">&lt;uri&gt;</span>model://ground_plane<span class="nt">&lt;/uri&gt;</span>
     <span class="nt">&lt;pose&gt;</span>0 0 0 0 0 0<span class="nt">&lt;/pose&gt;</span>
   <span class="nt">&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;</span>
     <span class="nt">&lt;uri&gt;</span>model://sun<span class="nt">&lt;/uri&gt;</span>
     <span class="nt">&lt;pose&gt;</span>0 0 0 0 0 0<span class="nt">&lt;/pose&gt;</span>
   <span class="nt">&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;</span>
     <span class="nt">&lt;uri&gt;</span>model://arena<span class="nt">&lt;/uri&gt;</span>
     <span class="nt">&lt;pose&gt;</span>0 0 0 0 0 1.5709<span class="nt">&lt;/pose&gt;</span>
   <span class="nt">&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier100<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier100<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.526888 1.256318 0 0 0 -1.265081<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier101<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier101<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-2.085606 1.805956 0 0 0 0.079193<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier102<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier102<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.930506 -0.534726 0 0 0 -1.673163<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier103<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier103<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.368433 0.781766 0 0 0 -1.052204<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier104<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier104<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.970239 0.782110 0 0 0 -2.404628<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier105<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier105<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.350856 -0.623322 0 0 0 1.701958<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier106<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier106<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-2.114056 1.274835 0 0 0 -2.142133<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier107<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier107<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.733601 0.222654 0 0 0 -2.112031<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier108<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier108<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.515878 2.041561 0 0 0 -1.939340<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;&lt;uri&gt;</span>model://carrier109<span class="nt">&lt;/uri&gt;&lt;name&gt;</span>carrier109<span class="nt">&lt;/name&gt;&lt;pose&gt;</span>-1.206330 -0.072660 0 0 0 3.082572<span class="nt">&lt;/pose&gt;&lt;/include&gt;</span>
   <span class="nt">&lt;include&gt;</span>
     <span class="nt">&lt;uri&gt;</span>model://block_wall<span class="nt">&lt;/uri&gt;</span>
     <span class="nt">&lt;name&gt;</span>bw<span class="nt">&lt;/name&gt;</span>
     <span class="nt">&lt;pose&gt;</span>1.35 -1.35 0 0 0 1.5709<span class="nt">&lt;/pose&gt;</span>
   <span class="nt">&lt;/include&gt;</span>
   <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">&quot;box&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;static&gt;</span>true<span class="nt">&lt;/static&gt;</span>
     <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">&quot;link&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;pose&gt;</span>0 1 0 0 0 0<span class="nt">&lt;/pose&gt;</span>
       <span class="nt">&lt;inertial&gt;</span>
         <span class="nt">&lt;mass&gt;</span>1.0<span class="nt">&lt;/mass&gt;</span>
         <span class="nt">&lt;inertia&gt;&lt;ixx&gt;</span>0.01<span class="nt">&lt;/ixx&gt;&lt;ixy&gt;</span>0.0<span class="nt">&lt;/ixy&gt;&lt;ixz&gt;</span>0.0<span class="nt">&lt;/ixz&gt;</span>
           <span class="nt">&lt;iyy&gt;</span>0.01<span class="nt">&lt;/iyy&gt;&lt;iyz&gt;</span>0.0<span class="nt">&lt;/iyz&gt;&lt;izz&gt;</span>0.01<span class="nt">&lt;/izz&gt;</span>
         <span class="nt">&lt;/inertia&gt;</span>
       <span class="nt">&lt;/inertial&gt;</span>
       <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&quot;collision&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;geometry&gt;</span>
           <span class="nt">&lt;box&gt;</span>
             <span class="nt">&lt;size&gt;</span>1 1 1<span class="nt">&lt;/size&gt;</span>
           <span class="nt">&lt;/box&gt;</span>
         <span class="nt">&lt;/geometry&gt;</span>
       <span class="nt">&lt;/collision&gt;</span>
       <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">&quot;visual&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;geometry&gt;</span>
           <span class="nt">&lt;box&gt;</span>
             <span class="nt">&lt;size&gt;</span>1 1 1<span class="nt">&lt;/size&gt;</span>
           <span class="nt">&lt;/box&gt;</span>
         <span class="nt">&lt;/geometry&gt;</span>
         <span class="nt">&lt;material&gt;</span>
           <span class="nt">&lt;script&gt;</span>
             <span class="nt">&lt;name&gt;</span>Gazebo/GreenTransparent<span class="nt">&lt;/name&gt;</span>
             <span class="nt">&lt;uri&gt;</span>file://media/materials/scripts/gazebo.material<span class="nt">&lt;/uri&gt;</span>
           <span class="nt">&lt;/script&gt;</span>
         <span class="nt">&lt;/material&gt;</span>
       <span class="nt">&lt;/visual&gt;</span>
     <span class="nt">&lt;/link&gt;</span>
   <span class="nt">&lt;/model&gt;</span>
 <span class="nt">&lt;/world&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-binaries">
<h3>Creating Binaries<a class="headerlink" href="#creating-binaries" title="Permalink to this heading"></a></h3>
</div>
</div>
<div class="section" id="lora-networks">
<h2>Lora Networks<a class="headerlink" href="#lora-networks" title="Permalink to this heading"></a></h2>
<p>The LoRa Network for the UMBRELLA project refers to the Chirpstack Network Server running on the UMBRELLA backend and a subset of UMBRELLA nodes that act as gateways. The webpages the user interacts with are wrappers around the Chirpstack API to provide continuity between UMBRELLA platforms.</p>
<p>The section will explain to the user the process of creating LoRaWAN Applications in UMBRELLA - quirks to be aware of etc. This guide will not seek to explain LoRaWAN, for which there is much better documentation. External links to Chirpstack pages will also be provided where appropriate, as most of the user interface and naming remain unchanged.</p>
<p>The contents of this section are described below and should be followed through in sequential order for users seeking to create new LoRaWAN applications.</p>
<p><a class="reference external" href="https://www.chirpstack.io/application-server/use/organizations">Organisations are used within Chirpstack</a>. to provide separate environments for different groups of users, allowing them to configure their devices and add their applications.</p>
<div class="section" id="creating-applications">
<h3>Creating Applications<a class="headerlink" href="#creating-applications" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://www.chirpstack.io/application-server/use/applications/">Applications allow organisations to separate their projects</a>. An example of this could be separating two sets of devices by location. To receive and process data in the UMBRELLA Portal, the user must create at least one Application.</p>
<p>On the Applications tab, <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Application</span></code> to bring up the window as shown in the image below. Name your Application something descriptive and add something more descriptive for the description. Select the Service Profile you created earlier and create the Application.</p>
</div>
<div class="section" id="creating-service-profiles">
<h3>Creating Service Profiles<a class="headerlink" href="#creating-service-profiles" title="Permalink to this heading"></a></h3>
<p>Service profiles allow users to optionally add things such as Gateway Metadata to their payloads sent to the application server. The configuration of Service Profiles is documented <a class="reference external" href="https://www.chirpstack.io/application-server/use/service-profiles/">here</a>.</p>
</div>
<div class="section" id="device-profiles">
<h3>Device Profiles<a class="headerlink" href="#device-profiles" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://www.chirpstack.io/application-server/use/device-profiles">Device profiles</a> are ways of managing different LoRaWAN device types within an Organisation. It allows new devices to be associated with a specific LoRaWAN profile rather than requiring configuration from scratch each time a similar device is added to an application (project). The details pertinent to a given device profile will be the configured attributes within the LoRaWAN stack used on the end device and things such as approximate uplink time.</p>
<p>Additionally, the device profile provides the user with a codec for sending and receiving data to the end device.</p>
</div>
<div class="section" id="integrations">
<h3>Integrations<a class="headerlink" href="#integrations" title="Permalink to this heading"></a></h3>
<p>Once we have configured the device and data is coming into the portal, we need integrations to store the data. Integrations allow the user to push received data onto a third-party service for storage. The integrations supported by UMBRELLA are posting the data to an HTTP URL or integration with InfluxDB.</p>

    <video width="500" height="300" controls >
    <source src="_static/Video/LoRa_Experiment.mp4" type="video/mp4">
    Video
    </video>
    </div>
</div>
<div class="section" id="street-lights">
<h2>Street Lights<a class="headerlink" href="#street-lights" title="Permalink to this heading"></a></h2>
</div>
<div class="section" id="air-quality-dashboard">
<h2>Air Quality Dashboard<a class="headerlink" href="#air-quality-dashboard" title="Permalink to this heading"></a></h2>
<div class="section" id="id7">
<h3>Steps<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Visit <a class="reference external" href="https://portal.umbrellaiot.com/">UMBRELLA Portal</a> , <cite>Login</cite>, <cite>UMBRELLA HOME</cite> → <cite>Air Quality Dashboard</cite></p></li>
<li><p>By default, the <cite>Portal will open the Ambient Conditions</cite> dashboard.</p></li>
<li><p>From the top right side menu option, Users can refresh the dashboard or users can change the time range.</p></li>
<li><p>The user can select the nodes on the top left side.</p></li>
<li><p>To download the data, Users can use the <cite>Export Table</cite> panel; perform <cite>Inspect → Data → Download CSV</cite> to download the data in the <cite>CSV</cite> file</p></li>
<li><p>Below are the dashboards available</p>
<ul>
<li><p>Ambient Conditions</p></li>
<li><p>Accelerometer</p></li>
<li><p>VOC</p></li>
<li><p>CO, NO2, NH3</p></li>
<li><p>Noise Level</p></li>
<li><p>Particulates (Nova)</p></li>
<li><p>Particulates (Plantower)</p></li>
<li><p>Alphasense OX</p></li>
<li><p>Alphasense NO2</p></li>
</ul>
</li>
</ul>

    <video width="500" height="300" controls >
    <source src="_static/Video/AirQuality_Experiment.mp4" type="video/mp4">
    Video
    </video>
    </div>
<div class="section" id="sensor-api">
<h3>Sensor API<a class="headerlink" href="#sensor-api" title="Permalink to this heading"></a></h3>
<div class="section" id="authorization">
<h4>Authorization<a class="headerlink" href="#authorization" title="Permalink to this heading"></a></h4>
<p>Keycloak will be used for authorizing the API calls from external clients.</p>
<div class="section" id="id9">
<h5>Steps<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>User must enter keycloak credentials</p></li>
<li><p>The credentials must pass via postman or rest template client</p></li>
<li><p>Keycloak will generate the token and send the token in the response</p></li>
<li><p>The user must call the sensor API with the token received in the previous steps</p></li>
<li><p>Sensor API internally validate whether the token is valid or not with keycloak</p></li>
<li><p>Keycloak sends the response back whether the token is valid or not</p></li>
</ul>
</div>
<div class="section" id="flow-diagram">
<h5>Flow Diagram<a class="headerlink" href="#flow-diagram" title="Permalink to this heading"></a></h5>
<blockquote>
<div><div class="figure align-center" id="id30">
<a class="reference internal image-reference" href="_images/Keycloak_Flow_Diagram.png"><img alt="Flow Diagram" src="_images/Keycloak_Flow_Diagram.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Flow Diagram</span><a class="headerlink" href="#id30" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
</div>
<div class="section" id="sequence-diagram">
<h5>Sequence Diagram<a class="headerlink" href="#sequence-diagram" title="Permalink to this heading"></a></h5>
<blockquote>
<div><div class="figure align-center" id="id31">
<a class="reference internal image-reference" href="_images/Sensor_Sequence_Diagram.png"><img alt="Sequence Diagram" src="_images/Sensor_Sequence_Diagram.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Sequence Diagram</span><a class="headerlink" href="#id31" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
</div>
<div class="section" id="jwt-token-renewal-flow">
<h5>JWT token Renewal flow<a class="headerlink" href="#jwt-token-renewal-flow" title="Permalink to this heading"></a></h5>
<blockquote>
<div><div class="figure align-center" id="id32">
<a class="reference internal image-reference" href="_images/Sensor_JWT_Diagram.png"><img alt="JWT token Renewal flow" src="_images/Sensor_JWT_Diagram.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">JWT token Renewal flow</span><a class="headerlink" href="#id32" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="login">
<h4>Login<a class="headerlink" href="#login" title="Permalink to this heading"></a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Produces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Post</p></td>
<td><p><a class="reference external" href="https://portal.umbrellaiot.com/auth/realms/Test/protocol/openid-connect/token">https://portal.umbrellaiot.com/auth/realms/Test/protocol/openid-connect/token</a></p></td>
<td><p>application/json</p></td>
</tr>
</tbody>
</table>
<div class="section" id="parameters">
<h5>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>In</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>grant_type</p></td>
<td><p>x-www-form-urlencoded</p></td>
<td><p>True</p></td>
<td><p>String</p></td>
<td><p>client_credentials</p></td>
</tr>
<tr class="row-odd"><td><p>client_id</p></td>
<td><p>x-www-form-urlencoded</p></td>
<td><p>True</p></td>
<td><p>String</p></td>
<td><p>Client Id provided by BRIL to SME clients</p></td>
</tr>
<tr class="row-even"><td><p>client_secret</p></td>
<td><p>x-www-form-urlencoded</p></td>
<td><p>True</p></td>
<td><p>String</p></td>
<td><p>Client Secret provided by BRIL to SME clients</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="response">
<h5>Response<a class="headerlink" href="#response" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>200</p></td>
<td><p>Request successful</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>Bad Request. Respective error value is shown</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sample-request">
<h5>Sample Request<a class="headerlink" href="#sample-request" title="Permalink to this heading"></a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl --location --request POST &#39;https://portal.umbrellaiot.com/auth/realms/Test/protocol/openid-connect/token&#39; \</span>
<span class="go">--header &#39;Content-Type: application/x-www-form-urlencoded&#39; \</span>
<span class="go">--data-urlencode &#39;grant_type=client_credentials&#39; \</span>
<span class="go">--data-urlencode &#39;client_id=&lt;client_id_value&gt;&#39; \</span>
<span class="go">--data-urlencode &#39;client_secret=&lt;client_secret_value&gt;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-response">
<h5>Sample Response<a class="headerlink" href="#sample-response" title="Permalink to this heading"></a></h5>
<p>A json map of bearer token for client credentials</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUI.....&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;expires_in&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;refresh_expires_in&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldU.....&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer &quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;not-before-policy&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;session_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0901f393-fde7-4d2d-b4d3-1ffc5e2380be&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;scope&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;email profile&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-list-of-nodes">
<h4>Get List of Nodes<a class="headerlink" href="#get-list-of-nodes" title="Permalink to this heading"></a></h4>
<p>This endpoint will get a list of all nodes with details.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Produces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/sn/api/v1/nodes/all?page=1&amp;size=10</p></td>
<td><p>application/json</p></td>
</tr>
</tbody>
</table>
<div class="section" id="id10">
<h5>Parameters<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>In</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Page</p></td>
<td><p>Query</p></td>
<td><p>False</p></td>
<td><p>Integer</p></td>
<td><p>page number</p></td>
</tr>
<tr class="row-odd"><td><p>Size</p></td>
<td><p>Query</p></td>
<td><p>False</p></td>
<td><p>Integer</p></td>
<td><p>Number of results to be returned</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h5>Response<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>200</p></td>
<td><p>Request successful</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>Bad Request; Respective error value is shown</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h5>Sample Request<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl --header &quot;Content-Type: application/json&quot; --header &quot;Authorization: Bearer &lt;access_token&gt;&quot; \</span>
<span class="go">--request GET \</span>
<span class="go">&#39;https://{$base-url}/sn/api/v1/nodes/all?page=1&amp;size=10&amp;sort=asc;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h5>Sample Response<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h5>
<p>A JSON map of the list of various nodes and details in a response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;hostName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;umbrella-02146357&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSS-A-12-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;gpsHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gcnjp264x26u&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Active&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;hostName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;umbrella-fe20e898&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSS-15-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;gpsHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gcnhyzcf20ys&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Active&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;refreshDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-08-11T09:30:01.359+00:00&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;property&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;ignoreCase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;ascending&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;toggleAscendingOnProperty&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pageSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;page&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;maxLinkedPages&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pageCount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;firstPage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;lastPage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;nrOfElements&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">117</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;firstElementOnPage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;lastElementOnPage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pageList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;hostName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;umbrella-02146357&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSS-A-12-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;gpsHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gcnjp264x26u&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Active&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;hostName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;umbrella-026eff5f&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSS-2-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;gpsHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gcnhypejsk7g&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Active&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-sensor-data">
<h4>Get Sensor Data<a class="headerlink" href="#get-sensor-data" title="Permalink to this heading"></a></h4>
<p>This endpoint retrieves various sensor data from multiple nodes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Produces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/sn/api/v1/nodes/sensorData</p></td>
<td><p>application/json</p></td>
</tr>
</tbody>
</table>
<div class="section" id="id14">
<h5>Parameters<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>In</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sensors</p></td>
<td><p>Payload</p></td>
<td><p>True</p></td>
<td><p>string</p></td>
<td><p>Name of the Sensors</p></td>
</tr>
<tr class="row-odd"><td><p>Nodes</p></td>
<td><p>Payload</p></td>
<td><p>True</p></td>
<td><p>string</p></td>
<td><p>Name of the nodes</p></td>
</tr>
<tr class="row-even"><td><p>timeperiod</p></td>
<td><p>Payload</p></td>
<td><p>False</p></td>
<td><p>Object</p></td>
<td><p>Time duration to retrieve sensor data. If not mentioned it will provide last 06 hours data.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h5>Response<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>200</p></td>
<td><p>OK Request successful</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>BAD REQUEST</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id16">
<h5>Sample Request<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl --request GET &#39;https://{$base-url}/sn/api/v1nodes/sensorData&#39; --header &quot;Content-Type:application/json&quot; --header &quot;Authorization: Bearer &lt;access_token&gt;&quot; --header &#39;Content-Type: application/json&#39; -d @payload.json</span>
</pre></div>
</div>
<p>Payload</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Noise&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;timeperiod&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;startTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-05T00:00:01&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;endTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-07-05T00:05:01&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h5>Sample Response<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h5>
<p>A JSON map of sensor data</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;sensorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Noise&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Max_bin_db&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Max_bin_frequency&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Noise_db&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeDetails&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:10.462Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:10.482Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">55.064575</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">63.432755</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">60.34762</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_frequency&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Noise_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">43.49276</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">43.517883</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">41.589684</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-16-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:40.993Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:41.089Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:02:41.134Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">66.90102</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">64.02167</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_frequency&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">508.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Noise_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">50.653976</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">53.073746</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}],</span><span class="w"></span>
<span class="w">    </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;sensorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dust&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Pm10_ug_m3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Pm2_5_ug_m3&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeDetails&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:09.3Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:09.404Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:02:09.512Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm10_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm2_5_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">0.0</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-16-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:39.912Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:40.024Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm10_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">12.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">13.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm2_5_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">4.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">4.0</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}]</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>A json map of sensor data for a sensor restricted to the client by Admin</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;alertMessage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are not allowed to query these Sensors :  BME680&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;sensorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Noise&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Max_bin_db&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Max_bin_frequency&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Noise_db&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeDetails&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:10.462Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:10.482Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">55.064575</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">63.432755</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">60.34762</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_frequency&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Noise_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">43.49276</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">43.517883</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">41.589684</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-16-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:40.993Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:41.089Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:02:41.134Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">66.90102</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">64.02167</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Max_bin_frequency&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">254.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">508.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Noise_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">50.653976</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">53.073746</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}],</span><span class="w"></span>
<span class="w">    </span><span class="p">[{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;sensorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dust&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Pm10_ug_m3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Pm2_5_ug_m3&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;nodeDetails&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:09.3Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:09.404Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:02:09.512Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm10_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm2_5_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">1.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">0.0</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;nodeId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RSE-16-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;timeStamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:00:39.912Z&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;2022-01-05T00:01:40.024Z&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm10_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">12.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">13.0</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;Pm2_5_ug_m3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="mf">4.0</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="mf">4.0</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}]</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-all-nodes-for-a-sensor">
<h4>Get All Nodes for a Sensor<a class="headerlink" href="#get-all-nodes-for-a-sensor" title="Permalink to this heading"></a></h4>
<p>This endpoint retrieves various nodes that are available for a sensor.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Produces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/sn/api/v1/nodes/all/view/nodes/all/{sensor name }</p></td>
<td><p>application/json</p></td>
</tr>
</tbody>
</table>
<div class="section" id="id18">
<h5>Parameters<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>In</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sensor name</p></td>
<td><p>Path variable</p></td>
<td><p>True</p></td>
<td><p>string</p></td>
<td><p>Name of the Sensor</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h5>Response<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>200</p></td>
<td><p>OK Request successful</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>BAD REQUEST: Sensor: &lt;sensor name&gt; is not present in Umbrella Network</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id20">
<h5>Sample Request<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl --header &quot;Content-Type:application/json&quot; --header &quot;Authorization:Bearer &lt;access_token&gt;&quot; --request GET &#39;https://{$base-url}/sn/api/v1/view/nodes/all/Noise&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h5>Sample Response<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h5>
<p>A JSON map of a list of nodes that have particular sensors is returned:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;sensorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Noise&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;RSE-1-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;RSE-12-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;RSE-15-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;RSE-16-C&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;RSE-17-C&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-list-of-sensors">
<h4>Get List of Sensors<a class="headerlink" href="#get-list-of-sensors" title="Permalink to this heading"></a></h4>
<p>This endpoint retrieves a list of various sensors present in the umbrella network.</p>
<div class="section" id="id22">
<h5>Parameters<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Produces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/sn/api/v1/nodes/all/view/sensor/all</p></td>
<td><p>application/json</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id23">
<h5>Response<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>200</p></td>
<td><p>OK Request successful</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>BAD REQUEST</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id24">
<h5>Sample Request<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl --header &quot;Content-Type:application/json&quot; --header &quot;Authorization: Bearer &lt;access_token&gt;&quot; --request GET &#39;https://{$base-url}/sn/api/v1/view/sensors/all&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h5>Sample Response<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h5>
<p>A JSON map of list of sensors that are present in the umbrella network is returned:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;BME680&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;Dust&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;Graphene-NO2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;IMU Conv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;IMU Res&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;MP503&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;MiCS6814&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;NO2-B43F&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;Noise&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;OX-B431&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;PMS5003&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="1_Architecture.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="99_Contact.html" class="btn btn-neutral float-right" title="Contact" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Umbrella.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>